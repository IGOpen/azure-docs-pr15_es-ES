<properties
   pageTitle="Lista de comprobación de disponibilidad | Microsoft Azure"
   description="Lista de comprobación que se proporciona pautas para las preocupaciones de disponibilidad durante el diseño."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="availability-checklist"></a>Lista de comprobación de disponibilidad

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="application-design"></a>Diseño de la aplicación

- **Evite cualquier punto de error único.** Todos los componentes, servicios, recursos e instancias de cálculo se deberían implementar como varias instancias para impedir que afecta la disponibilidad de un punto único de error. Esto incluye mecanismos de autenticación. Diseñar la aplicación sea configurable usar varias instancias y para detectar errores y automáticamente redirigir las peticiones a instancias sin errores donde la plataforma no hace esto automáticamente.
- **Descomponer la carga de trabajo por otro acuerdo de servicio.** Si un servicio se compone de cargas de trabajo críticas y menos críticas, administrarlos de forma diferente y especifique las características de servicio y el número de instancias para satisfacer sus requisitos de disponibilidad.
- **Minimizar y comprender las dependencias de servicio.** Minimizar el número de servicios diferentes que se utilizan cuando sea posible y asegúrese de que comprender todas las dependencias de características y servicios que existen en el sistema. Esto incluye la naturaleza de las dependencias y el impacto de error o reduzca el rendimiento en cada uno de ellos en la aplicación general. Microsoft garantiza al menos disponibilidad 99,9 por ciento para la mayoría de los servicios, pero esto significa que cada servicio adicional una aplicación se basa en potencialmente reduce la disponibilidad general SLA de su sistema de 0,1 por ciento.
- **Diseñar las tareas y los mensajes que sean idempotentes (repetición de forma segura) siempre que sea posible**, por lo había duplicado solicitudes no provocará problemas. Por ejemplo, un servicio puede actuar como consumidor que controla los mensajes enviados como peticiones por otras partes del sistema que actúen como productor. Si el consumidor no funciona después de procesar el mensaje, pero antes de enviar la confirmación de que se ha procesado, un productor puede enviar una solicitud de repetición que podría corregirse otra instancia del consumidor. Por este motivo, los consumidores y las operaciones que se llevan a cabo deben tener idempotente para repetir una operación ejecutada previamente no representar los resultados no válidos. Esto puede significar detectar duplicado mensajes o garantizar la coherencia usando un enfoque optimista para tratar los conflictos.
- **Use un agente de mensaje que implementa alta disponibilidad para las transacciones críticas.** Muchos escenarios para iniciar tareas u obtener acceso a servicios remotos utilizan mensajería para pasar instrucciones entre la aplicación y el servicio de destino. Para mejorar el rendimiento, la aplicación debería poder enviar el mensaje y, a continuación, volver a procesar más solicitudes, sin necesidad de esperar una respuesta. Para garantizar la entrega de mensajes, el sistema de mensajería debe proporcionar alta disponibilidad. Colas de mensajes de Bus de servicio Azure implementan semántica de _al menos una vez_ . Esto significa que cada mensaje enviado a una cola no se perderán, aunque se pueden entregar copias duplicadas en determinadas circunstancias. Si el procesamiento de los mensajes es idempotente (consulte la sección anterior), repite entrega no debe ser un problema.
- **Diseño de aplicaciones para degradar correctamente** cuando se comunique con los límites de recursos y tomar las medidas adecuadas para minimizar el impacto para el usuario. En algunos casos, la carga de la aplicación puede superar la capacidad de uno o más elementos, causando reducen la disponibilidad y conexiones con errores. Escala puede ayudar a mitigar este problema, pero puede llegar a un límite por otros factores, como la disponibilidad de recursos o costo. Diseñar la aplicación para que, en esta situación, automáticamente puede degradar correctamente. Por ejemplo, en un sistema de comercio electrónico, si el subsistema de procesamiento de pedidos está bajo presión (o incluso ha fallado por completo), se puede deshabilitar temporalmente permitiendo otras funciones (por ejemplo, para explorar el catálogo de productos) para continuar. Puede ser conveniente posponer solicitudes a un subsistema de errores, permitiendo a los clientes enviar pedidos por el ejemplo aún pero guardarlas para el procesamiento de más adelante, cuando el subsistema de pedidos está disponible de nuevo.
- **Administrar correctamente los eventos de ráfaga rápida.** La mayoría de las aplicaciones necesitan administrar diferentes cargas de trabajo con el tiempo, por ejemplo, picos temprano en la mañana en una aplicación empresarial o cuando se publique un nuevo producto en un sitio de portal de negocio. Escala automática puede ayudar a controlar la carga, pero puede tardar algún tiempo para instancias adicionales para conectarse y controlar las solicitudes. Impedir que una sobrecarga de la aplicación rápidas e inesperados ráfagas de actividad: diseñar para las solicitudes de cola a los servicios que utiliza y apartar cuando colas están cerca de la capacidad total. Asegúrese de que hay suficiente capacidad y el rendimiento en condiciones sin ráfaga vacíe las colas y administrar solicitudes pendientes. Para obtener más información, vea el [modelo de redistribución de carga basado en cola](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Implementación y mantenimiento

- **Implementar varias instancias de funciones para cada servicio.** Microsoft no ofrece garantías de disponibilidad para los servicios que cree e implemente, pero estas garantías sólo son válidas si implementa al menos dos instancias de cada rol en el servicio. Esto permite una función que no esté disponible mientras que el otro permanece activo. Esto es especialmente importante si necesita implementar actualizaciones en un sistema directo sin interrumpir las actividades de los clientes; instancias pueden desactivarlo y actualizar de manera individual mientras las demás continúan en línea.
- **Aplicaciones de host de múltiples centros de datos.** Aunque no es muy probable, es posible para un centro de datos completo que trabaje sin conexión a través de un evento como un error de Internet o desastre natural. Aplicaciones empresariales fundamental deben estar alojadas en más de un centro de datos para proporcionar disponibilidad máxima. También puede reducir la latencia de los usuarios locales y proporcionar oportunidades adicionales para flexibilidad al actualizar aplicaciones.
- **Automatizar y tareas de mantenimiento y de implementación de prueba.** Aplicaciones distribuidas constan de varios elementos que deben trabajar juntos. Implementación debería estar, por tanto, automatizada, usando mecanismos probados y comprobados como secuencias de comandos y aplicaciones de implementación. Estos pueden actualizar y validar la configuración y automatizar el proceso de implementación. También se deben utilizar técnicas automatizadas para realizar actualizaciones de todo o parte de las aplicaciones. Es fundamental probar todos estos procesos plenamente para asegurar que los errores hacen que el tiempo de inactividad adicional. Todas las herramientas de implementación deben tener restricciones de seguridad adecuado para proteger la aplicación implementada; definir y aplicar directivas de implementación cuidadosamente y minimizar la necesidad de intervención humana.
- **Considere la posibilidad de usar las funciones de la plataforma de ensayo y de producción** donde se encuentran disponibles. Por ejemplo, mediante servicios de nube de Azure entornos de ensayo y producción permite que las aplicaciones se puede cambiar de uno a otro al instante a través de un intercambio de dirección IP virtual (VIP de intercambio). Sin embargo, si prefiere fase local, o implementar diferentes versiones de la aplicación de forma simultánea y gradualmente migrar los usuarios, es podrán no pueda usar una operación de intercambio de VIP.
- **Aplicar los cambios de configuración sin reciclaje** la instancia cuando sea posible. En muchos casos, los valores de configuración para una aplicación de Azure o servicio pueden cambiarse sin necesidad de la función reiniciar. Función exponer los eventos que se pueden controlar para detectar cambios de configuración y aplicarlos a los componentes de la aplicación. Sin embargo, algunos cambios a la configuración de la plataforma de núcleo requieren una función reiniciar. Al crear los servicios y componentes, maximizar la disponibilidad y minimizar el tiempo de inactividad al diseñarles permite aceptar los cambios de configuración sin necesidad de reiniciar la aplicación como un todo.
- **Usar dominios actualización de cero inactividad durante las actualizaciones.** Azure calcular unidades como web y se asignan los roles de trabajo para actualizar los dominios. Actualización dominios agrupar las instancias de función para que, cuando realiza una actualización sucesiva, cada rol en actualizar el dominio se detenga, actualizar y reinicie por separado. Esto minimiza el impacto en la disponibilidad de la aplicación. Puede especificar cuántos dominios actualización deben crearse para un servicio cuando se implementa el servicio.

    > [AZURE.NOTE] Funciones también se distribuyen entre dominios de error, cada una de las cuales es razonablemente independiente de otros dominios de error en términos de bastidor del servidor, power y refrigeración disposición, con el fin de reducir las posibilidades de un error de todas las instancias de la función. Esta distribución se produce automáticamente y no se puede controlar.

- **Configurar los conjuntos de disponibilidad para máquinas virtuales de Windows Azure.** Colocación de dos o más máquinas virtuales en el mismo conjunto de disponibilidad garantiza que estas máquinas virtuales no se implementará en el mismo dominio de errores. Para maximizar la disponibilidad, debe crear varias instancias de cada máquina virtual crítica usado por el sistema y coloque estas instancias en el mismo conjunto de disponibilidad. Si se están ejecutando varias máquinas virtuales que se usan con otros fines, cree una disponibilidad para cada máquina virtual. Agregar instancias de cada máquina virtual para cada conjunto de disponibilidad. Por ejemplo, si ha creado máquinas virtuales separadas para que actúe como un servidor web y un servidor de informes, cree una disponibilidad de establecer para el servidor web y otro para el servidor de informes. Agregar instancias de la máquina virtual del servidor web a la disponibilidad de los servidores web establecen y agregar instancias de la máquina virtual de servidor informes al conjunto de disponibilidad informes de servidor.

## <a name="data-management"></a>Administración de datos

- **Aprovechar las ventajas de la replicación de datos** local y geográfica redundancia. Datos de almacenamiento de Azure se duplica automáticamente para proteger contra la pérdida en caso de error de infraestructura y se pueden configurar algunos aspectos de esta replicación. Por ejemplo, pueden replicarse copias de sólo lectura de datos en más de una región geográfica (denominado globalmente redundante almacenamiento de acceso de lectura o GRS RA). Tenga en cuenta que el uso de RA GRS provoca cargos adicionales. Para obtener información detallada, consulte [Precios de almacenamiento de Azure](https://azure.microsoft.com/pricing/details/storage/).
- **Usar simultaneidad optimista y la coherencia** cuando sea posible. Transacciones que bloquear el acceso a los recursos mediante un bloqueo (simultaneidad pesimista) puede producir un bajo rendimiento y reducir considerablemente la disponibilidad. Estos problemas pueden ser especialmente llamativa en sistemas distribuidos. En muchos casos, el diseño cuidado y técnicas como las particiones pueden minimizar las probabilidades de las actualizaciones en conflicto que se produzca. Cuando los datos se duplican o se leen desde una tienda por separado actualizada, los datos solo podrá finalmente coherentes. Pero las ventajas suele ser mucho mayores que el impacto en la disponibilidad de uso de transacciones para garantizar la coherencia inmediato.
- **Usar periódico copia de seguridad y restauración de punto en el tiempo**y asegúrese de que cumple con el objetivo de punto de recuperación (RPO). Con regularidad automáticamente hacer copia de seguridad de datos que no se conservan en otro sitio y comprobar que puede confiable restaurar los datos y la aplicación debería producir un error. Replicación de datos no es una característica de copia de seguridad debido a errores e incoherencias presentó por error, error u operaciones malintencionadas se reflejarán en almacena todos los. El proceso de copia de seguridad debe ser seguro para proteger los datos en tránsito y almacenamiento. Bases de datos o partes de un almacén de datos pueden suele recuperarse a un punto anterior en el tiempo mediante el uso de registros de transacciones. Microsoft Azure proporciona una función de copia de seguridad de los datos almacenados en la base de datos de SQL Azure. Los datos exportados a un paquete de copia de seguridad en el almacenamiento de blobs de Windows Azure y pueden descargarse en una ubicación segura en local para el almacenamiento.
- **Habilitar la opción de alta disponibilidad mantener una copia de la caché de Azure Redis secundaria.** Cuando se utiliza la caché de Azure Redis, elija la opción estándar para mantener una copia del contenido secundaria. Para obtener más información, consulte [crear una caché en Azure Redis caché](https://msdn.microsoft.com/library/dn690516.aspx).

## <a name="errors-and-failures"></a>Errores de y

- **Presentar el concepto de un tiempo de espera.** Servicios y recursos pueden no estar disponibles, provocando errores en las solicitudes. Asegúrese de que los tiempos de espera aplicar son las más apropiadas para cada servicio o recurso, así como el cliente que tiene acceso a ellos. (En algunos casos, puede ser adecuado permitir un tiempo de espera de una instancia determinada de un cliente, según el contexto y otras acciones que lleva a cabo el cliente.) Tiempos de espera muy breve pueden hacer operaciones de reintento excesivo para servicios y recursos que tienen una latencia mucho. Tiempos de espera de gran tamaño pueden provocar si está en la cola de una gran cantidad de solicitudes de bloqueo, esperando un recurso responder o un servicio.
- **Vuelva a intentar operaciones con errores causadas por errores transitorias.** Diseñar una estrategia de intentos para tener acceso a todos los servicios y recursos donde no inherente admiten intentos de conexión automática. Use una estrategia que incluya un aumento de retraso entre reintentos como el número de errores aumenta, para evitar la sobrecarga de los recursos y le permiten recuperar correctamente y controlar las solicitudes en cola. Reintentos continuos con retrasos muy breves están probable que agudizan el problema.
- Para **dejar de enviar solicitudes para evitar errores en cascada** servicios remota no están disponibles. Puede haber situaciones en las que tardan mucho más de lo esperado en volver a normal transitorio u otros errores, que varían en gravedad, desde una pérdida parcial de conectividad para el error completo de un servicio. Además, si un servicio está muy ocupado, error en una parte del sistema puede provocar errores en cascada y resultado en muchas operaciones que se bloquee mientras mantiene a recursos críticos del sistema como memoria, subprocesos y conexiones de base de datos. En lugar de continuamente reintentar una operación que es probable que se realice correctamente, la aplicación debe aceptar rápidamente que la operación ha fallado y controlar correctamente este error. Puede usar el modelo de disyuntor para rechazar solicitudes de operaciones específicas para períodos definidos. Para obtener más detalles, consulte [Disyuntor de trama](https://msdn.microsoft.com/library/dn589784.aspx).
- **Redactar o retroceso a varios componentes** para reducir el impacto de un servicio específico no está disponible. Diseñar aplicaciones aprovechar varias instancias sin que afecten a operación y conexiones existentes siempre que sea posible. Usar varias instancias y distribuir solicitudes entre ellas y detectar y evitar enviar convocatorias a instancias del error, para maximizar la disponibilidad.
- **Retroceso a un servicio diferente o un flujo de trabajo** cuando sea posible. Por ejemplo, si se produce un error de escritura a la base de datos de SQL, almacenar temporalmente datos en el almacenamiento de blobs de Windows. Proporcionar una instalación para reproducir la escritura en el almacenamiento de blobs de base de datos SQL cuando el servicio esté disponible. En algunos casos, es posible que una operación tenga una acción alternativa que permite seguir trabajando incluso cuando un componente o servicio falla la aplicación. Si es posible detectar errores y redirigir las solicitudes para otros servicios que pueden ofrecer una funcionalidad alternativa adecuada, o para realizar copias de seguridad o instancias de funcionalidad reducida que pueden mantener las operaciones principales mientras está desconectado el servicio principal.

## <a name="monitoring-and-disaster-recovery"></a>Supervisión y recuperación de desastres

- **Proporcionar instrumentación enriquecido probables errores y eventos de error** para informar de la situación al personal de operaciones. Para los errores que es probable que pero aún no ha ocurrido, proporcionar datos suficientes para habilitar personal de operaciones determinar la causa, mitigar la situación y asegúrese de que el sistema sigue estando disponible. Para los errores que ya se han producido, la aplicación debe devolver un mensaje de error correspondiente al usuario, pero para continuar ejecutando, aunque con funcionalidad reducida. En todos los casos, el sistema de supervisión debe capturar detalles completos para habilitar personal de operaciones realizar una recuperación rápida y si es necesario, para diseñadores y desarrolladores modificar el sistema evitar que la situación que surgen nuevamente.
- **Supervisar el mantenimiento del sistema implementando funciones de comprobación.** El estado y el rendimiento de una aplicación pueden reducir el tiempo, sin ser perceptibles hasta que se produce un error. Implementar sondeos o funciones que se ejecutan con regularidad desde fuera de la aplicación de comprobación. Estas comprobaciones pueden ser tan sencillas como medir el tiempo de respuesta de la aplicación como un todo, elementos individuales de la aplicación, servicios individuales que usa la aplicación o los componentes individuales. Funciones de verificación pueden ejecutar procesos para garantizar resultados válidos, medir la latencia y comprobar la disponibilidad y extraer información del sistema.
- **Probar con regularidad todos los sistemas de reserva y migración tras error** para asegurarse de que están disponibles y funcionan como se esperaba. Cambios de sistemas y operaciones pueden afectar funciones reserva y migración tras error, pero no puede detectar el impacto hasta que el sistema principal falla o no se sobrecarga. Probarlo antes de que es necesario compensa la para un problema directo en tiempo de ejecución.
- **Probar los sistemas de supervisión.** Tras error automatizada y sistemas de reserva y visualización manual de mantenimiento del sistema y rendimiento mediante paneles, todo dependen de supervisión y la instrumentación funciona correctamente. Si estos elementos no se realice correctamente, se pierda información importante, o un informan de datos incorrectos, un operador puede no darse cuenta de que el sistema está en mal estado o con errores.
- **Seguimiento del progreso de los flujos de trabajo de ejecución larga** e inténtelo de nuevo en caso de error. Flujos de trabajo de ejecución larga a menudo constan de varios pasos. Asegúrese de que cada paso es independiente y puede volver a intentar para reducir la posibilidad de que todo el flujo de trabajo tendrán que se puede deshacer, o que deben ejecutarse varias transacciones de compensación. Supervisar y administrar el progreso de los flujos de trabajo de ejecución larga implementando un modelo como [Programador agente Supervisor trama](https://msdn.microsoft.com/library/dn589780.aspx).
- **Plan de recuperación.** Asegúrese de que hay un plan aceptado, totalmente probado y documentado de recuperación de cualquier tipo de error que puede representar parte o todo el sistema principal disponible. Probar los procedimientos con regularidad y asegúrese de que todo el personal de operaciones está familiarizado con el proceso.
